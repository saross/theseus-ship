{
  "metadata": {
    "title": "htmltoc archaeological tool",
    "user": {
      "name": "Shawn"
    },
    "dates": {
      "created": "2025/5/1 22:04:51",
      "updated": "2025/12/7 21:39:55",
      "exported": "2025/12/8 18:03:26"
    },
    "link": "https://chatgpt.com/g/g-p-682fbda4eb1c819180b176f6de9d9cd8-theseus-ship/c/6813d3e3-35bc-800c-8653-cf04298a2032",
    "powered_by": "ChatGPT Exporter (https://www.chatgptexporter.com)"
  },
  "messages": [
    {
      "role": "Prompt",
      "say": "Hi ChatGPT, can you tell me anything about the archaeological software tool 'htmltoc'"
    },
    {
      "role": "Response",
      "say": "Thought for 2m 31s\n\n\nIn brief: htmltoc is a lightweight command-line utility that scans one or more HTML files, inserts anchors where necessary, and emits a hierarchically-nested, hyper-linked “Table of Contents” (ToC). Written in Perl by Earl Hood in July 1994, later absorbed into Norman Ramsey’s noweb literate-programming tool-chain and packaged by most GNU/Linux distributions, it became a quiet work-horse of early digital-archaeology publishing—most visibly in the production pipeline of Internet Archaeology from Issue 2 (1997) onward. Although development ceased two decades ago, the script is still shipped with noweb and remains handy when archaeologists need to retrofit legacy excavation pages with navigable structure or to post-process HTML emitted by tools such as Pandoc.\n\n\n\n1 Origins and historical context\n\nYear\nMilestone\nNotes\n1994\nHood posts the first public release to comp.infosystems.www and the W3C “Tools” archive W3C\nImplements a tocmap file, -inline, -header, -footer, etc.\n1994-96\nBundled into the perlWWW and txt2html ecosystems\ntxt2html’s README recommends running htmltoc after conversion GitHub\n1997\nAdopted (with local tweaks) by Internet Archaeology to automate navigation bars and per-paper ToCs Internet Archaeology\nUsed alongside pnuts and htmlfig\n1999-2001\nNorman Ramsey rewrites/slims it for the noweb pipeline; included in noweb 2.11b and documented in a manpage Ubuntu Manpages\n2008\nAn Icon re-implementation appears in the CTAN mirror, again attributed to Ramsey’s original ctan.uib.no\n2000s-present\nShipped by Debian/Ubuntu inside noweb and via the dedicated libhtml-toc-perl module Debian PackagesDebian Packages\n\n\n2 How the script works\n\n\n2.1 Input parsing\n\n\nhtmltoc tokenises the HTML, looks for heading tags (<H1>–<H6> by default), and—if a heading lacks an id/name anchor—inserts one whose value is prefixed xtocid-n. The headings and their levels are cached in memory to build the ToC structure. If the user provides a toc-map file, arbitrary elements (e.g. <DT>, <DIV class=\"context\">) can be treated as “significant”. W3C\n\n\n2.2 Output modes\n\nOption\nEffect\n-toc file\nWrite ToC to file (stdout if omitted).\n-inline\nInsert the generated ToC between the markers <!--tableofcontents--> and <!--/tableofcontents--> inside the original file.\n-ol / -ul (implicit)\nRender the first-level list as <OL> or <UL>.\n-prefix STR\nChange anchor prefix (defaults to xtocid).\n-textonly\nStrip embedded markup from heading text.\n\nThe noweb workflow pipes the prettified HTML produced by noweave straight through htmltoc:\n\n\nnoweave -filter l2h -index -html diary.nw | htmltoc -inline > diary.html\n\n\n(This example is lifted verbatim from Noweb documentation Wikipedia.)\n\n\n2.3 Known limitations\n\n\nThe noweb edition only recognises headings on a single physical line—multi-line tags are ignored Ubuntu Manpages.\n\nIt is HTML 4-oriented; headings introduced via ARIA-role or <header> sectional markup are missed.\n\nNo built-in Unicode normalisation; projects containing non-ASCII IDs may need a wrapper script.\n\n\n\n3 Why archaeologists cared\n\n\nDigital excavation reports and research articles often sprawl over dozens of screens, each with nested sub-sections for context descriptions, finds catalogues, compositional analyses, GIS exports, and appendix data. When Internet Archaeology launched in 1996, hand-maintaining inter-page navigation quickly became unviable. Their 1997 editorial explains that a “modified version” of htmltoc let editors choose which heading levels to expose, auto-link anchors, and regenerate every ToC en-masse whenever a page changed Internet Archaeology.\n\n\nThe same need recurs in contemporary fieldwork portals: static-site generators (Hugo, Jekyll) will happily spit out raw HTML from Markdown, but if your HTML originates elsewhere—say, from a bespoke MS Access-to-HTML export of unit sheets—htmltoc is still the fastest way to add navigability without re-tooling the whole pipeline.\n\n\n\n4 Obtaining and installing\n\nPlatform\nPackage / Command\nDebian/Ubuntu\nsudo apt-get install noweb (installs /usr/bin/htmltoc and its manpage) Ubuntu Manpages\nFedora / RHEL\ndnf install noweb\nAny OS with Perl 5\nDownload the original 1994 release or the slimmer “noweb” script, mark executable, and place on $PATH.\nProgrammatic use\ncpan install HTML::Toc for a fully-OO Perl module with update-in-place features Debian Packages\n\n\n5 Strengths, weaknesses, and survivability\n\n✔︎ Strength\n✖︎ Weakness / Risk\nTiny footprint (≈250 LOC) and zero non-core dependencies.\nNot HTML5-aware; will not detect <section>-based outlines.\nWorks as a pure filter—easy to place inside make or CI pipelines.\nGenerates opaque anchor IDs (xtocid3) that impede semantic linking.\nRetains authors’ hierarchy choices (through toc-map).\nProject effectively unmaintained; bug fixes rely on community forks (e.g. hacks-website/htmltoc) GitHub.\n\n\n6 Modern alternatives and interoperability\n\n\nPandoc --toc flag—ideal when your source is Markdown/Word but not when you start with raw HTML.\n\nHTML::GenToc Perl module—handles multi-line headings, supports insertion or external files, and is maintained in Debian Debian Packages.\n\nStatic-site generators (Jekyll, Hugo, Quarto): built-in ToC generation but require reformatting source.\n\nJavaScript client-side TOCs (e.g. Tocbot) avoid build-time steps but increase load time and can break under CSP.\n\n\n\n7 Take-aways for archaeological practice\n\n\nhtmltoc remains a quick, scriptable fix for legacy excavation pages or exported datasets that lack navigational aids.\n\nFor born-digital workflows, modern markdown-centric or CMS-native ToC features are preferable, but having htmltoc on hand is valuable when external collaborators send “messy” HTML dumps.\n\nIf reproducibility is paramount (e.g. publishing code + narrative with noweb or org-mode), piping through htmltoc keeps the build fully deterministic and free of browser-side dependencies—a virtue for digital preservation.\n\n\n\nFurther reading\n\n\nHood, E. “ANNOUNCE: Table of Contents Generator for HTML.” Usenet posting, 21 July 1994. W3C\n\nVince, A. “Editorial: Automation of paper production.” Internet Archaeology 2 (1997). Internet Archaeology\n\nRamsey, N. htmltoc(1) manpage, noweb 2.11b (2001). Ubuntu Manpages\n\n“Noweb,” Wikipedia, rev. Jan 2025—example pipeline with htmltoc. Wikipedia\n\nDebian Package libhtml-toc-perl, description and file list. Debian PackagesDebian Packages\n\ntxt2html README: suggestion to use htmltoc for post-processing. GitHub\n\nhacks-website/htmltoc—community fork with minor fixes. GitHub\n\nCTAN Icon port htmltoc.nw (2008) for non-Perl environments. ctan.uib.no\n\n\n\nBottom line: if you need a no-frills, build-time Table of Contents for archaeological web material—especially legacy HTML or output from literate-programming notebooks—install noweb (or grab the script), add | htmltoc to your pipeline, and move on to the next trench."
    }
  ]
}